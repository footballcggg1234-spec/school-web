<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå - ‡∏£‡∏≤‡∏ä‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ô‡∏∏‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πí‡πñ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f8f9fa; }
        
        /* 1. ‡πÅ‡∏ñ‡∏ö‡πÅ‡∏î‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏™‡∏∏‡∏î */
        .top-bar { background-color: #b30000; color: white; padding: 5px 0; font-size: 0.9rem; }
        .top-bar a { color: white; text-decoration: none; margin-left: 15px; font-weight: 500; }
        .top-bar a:hover { text-decoration: underline; }

        /* 2. ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å (Navbar) */
        .navbar { background-color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.05); padding: 15px 0; }
        .navbar-brand { display: flex; align-items: center; }
        .brand-logo { 
            background-color: #b30000; color: white; width: 45px; height: 45px; 
            border-radius: 50%; display: flex; align-items: center; justify-content: center; 
            font-weight: bold; margin-right: 10px; font-size: 1.2rem;
        }
        .brand-text h1 { font-size: 1.2rem; margin: 0; color: #b30000; font-weight: bold; }
        .brand-text p { font-size: 0.8rem; margin: 0; color: #666; }
        
        .nav-link { color: #333 !important; font-weight: 500; margin: 0 10px; }
        .nav-link:hover { color: #b30000 !important; }
        .btn-register { 
            background-color: #ffc107; color: #333 !important; 
            font-weight: bold; border-radius: 20px; padding: 6px 20px; 
        }

        /* 3. ‡πÅ‡∏ö‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (Hero Section) */
        .page-header {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://placehold.co/1200x400/555/white?text=School+Activity');
            background-size: cover;
            background-position: center;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-bottom: 40px;
        }
        .page-header h2 { 
            font-weight: bold; font-size: 2.5rem; border-bottom: 3px solid #ffc107; 
            padding-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        /* 4. ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ */
        .search-container { max-width: 500px; margin: 0 auto 50px auto; position: relative; }
        .search-container input { 
            border-radius: 5px; padding: 12px 20px; border: 1px solid #ddd; 
            width: 100%; box-shadow: 0 2px 5px rgba(0,0,0,0.05); outline: none;
        }
        .search-container i { position: absolute; right: 20px; top: 15px; color: #888; }

        /* 5. ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ç‡πà‡∏≤‡∏ß */
        .news-card { 
            border: none; border-radius: 10px; overflow: hidden; background: white; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: transform 0.3s; height: 100%; 
        }
        .news-card:hover { transform: translateY(-5px); }
        .news-img { height: 200px; object-fit: cover; width: 100%; background-color: #eee; }
        .news-body { padding: 25px; }
        
        .badge-category {
            background-color: #ffe5e5; color: #d63384; font-size: 0.75rem; 
            padding: 4px 10px; border-radius: 20px; font-weight: bold; margin-bottom: 10px; display: inline-block;
        }
        
        .news-title { font-weight: bold; font-size: 1.15rem; margin-bottom: 10px; line-height: 1.4; color: #333; }
        .news-desc { font-size: 0.9rem; color: #666; margin-bottom: 20px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .read-more { color: #002244; text-decoration: none; font-weight: bold; font-size: 0.9rem; display: flex; align-items: center; }
        .read-more:hover { text-decoration: underline; }
        .read-more i { margin-left: 5px; font-size: 0.8rem; }

        /* Footer */
        footer { background-color: #002244; color: white; padding: 30px 0; margin-top: 80px; font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="container d-flex justify-content-end align-items-center">
            <a href="admin.html"><i class="fas fa-lock"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</a>
        </div>
    </div>

    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#">
                <div class="brand-logo">RPK</div>
                <div class="brand-text">
                    <h1>‡∏£‡∏≤‡∏ä‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ô‡∏∏‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πí‡πñ</h1>
                    <p>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏•‡∏≥‡∏û‡∏π‡∏ô</p>
                </div>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav align-items-center">
                    <li class="nav-item"><a class="nav-link" href="#">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a></li>
                    <li class="nav-item"><a class="nav-link btn-register" href="#">‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <header class="page-header">
        <h2>‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
    </header>

    <div class="container">
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ç‡πà‡∏≤‡∏ß..." onkeyup="filterNews()">
        </div>

        <div class="row g-4" id="news-container">
            <div class="col-12 text-center py-5">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="mt-2 text-muted">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πà‡∏≤‡∏ß...</p>
            </div>
        </div>
        
        <div id="error-message" class="text-center text-danger mt-4" style="display:none;">
            <h4><i class="fas fa-exclamation-triangle"></i> ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Server ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ</h4>
            <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend (server.js) ‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà</p>
        </div>
    </div>

    <footer class="text-center">
        <div class="container">
            <p class="mb-0">¬© 2025 ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏ä‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ô‡∏∏‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πí‡πñ ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏•‡∏≥‡∏û‡∏π‡∏ô</p>
        </div>
    </footer>

    <script>
        let allNewsData = [];

        document.addEventListener('DOMContentLoaded', async () => {
            const container = document.getElementById('news-container');
            const errorDiv = document.getElementById('error-message');

            try {
                // *** ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÉ‡∏ä‡πâ /api/news ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á Localhost ‡πÅ‡∏•‡∏∞ Render ***
                const response = await fetch('/api/news'); 
                
                if (!response.ok) throw new Error('Failed to fetch');
                
                allNewsData = await response.json();
                renderNews(allNewsData); // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•

            } catch (error) {
                console.error('Error:', error);
                container.style.display = 'none'; // ‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡πÇ‡∏´‡∏•‡∏î
                errorDiv.style.display = 'block'; // ‡πÇ‡∏ä‡∏ß‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Error ‡∏™‡∏µ‡πÅ‡∏î‡∏á
            }
        });

        function renderNews(newsList) {
            const container = document.getElementById('news-container');
            container.innerHTML = ''; // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏°‡∏∏‡∏ô‡πÜ)

            if (newsList.length === 0) {
                container.innerHTML = '<div class="col-12 text-center"><p class="text-muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</p></div>';
                return;
            }

            newsList.forEach(news => {
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÑ‡∏´‡∏° ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ placeholder
                const imgUrl = news.imageUrl ? news.imageUrl : 'https://placehold.co/600x400?text=News';
                
                const html = `
                    <div class="col-md-4">
                        <div class="news-card">
                            <img src="${imgUrl}" class="news-img" alt="News Image" onerror="this.src='https://placehold.co/600x400?text=No+Image'">
                            <div class="news-body">
                                <span class="badge-category">${news.category || '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'}</span>
                                <h5 class="news-title">${news.title}</h5>
                                <p class="news-desc">${news.content || ''}</p>
                                <a href="#" class="read-more">‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° <i class="fas fa-arrow-right"></i></a>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function filterNews() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = allNewsData.filter(news => 
                news.title.toLowerCase().includes(query) || 
                (news.content && news.content.toLowerCase().includes(query))
            );
            renderNews(filtered);
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>