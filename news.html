<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î - RPK26</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- Theme Colors --- */
        :root {
            --primary-red: #b30000;
            --primary-yellow: #ffcc00;
            --dark-blue: #002244;
            --bg-gray: #f8f9fa;
        }
        body { font-family: 'Sarabun', sans-serif; margin: 0; background: var(--bg-gray); color: #333; }

        /* --- Navbar (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô) --- */
        .top-bar { background-color: var(--primary-red); padding: 8px 20px; display: flex; justify-content: flex-end; }
        .top-bar a { color: white; text-decoration: none; font-size: 0.9rem; }
        nav { background: white; padding: 15px 40px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000; }
        .logo-area { display: flex; align-items: center; gap: 15px; }
        .logo-text h1 { margin: 0; font-size: 1.5rem; color: var(--primary-red); }
        .logo-text p { margin: 0; font-size: 0.9rem; color: #666; }
        nav ul { list-style: none; display: flex; gap: 30px; margin: 0; }
        nav a { text-decoration: none; color: var(--dark-blue); font-weight: 600; transition: 0.3s; }
        nav a:hover, nav a.active { color: var(--primary-red); border-bottom: 2px solid var(--primary-red); }
        .btn-apply-nav { background: var(--primary-yellow); color: var(--dark-blue); padding: 8px 20px; border-radius: 20px; }

        /* --- Header --- */
        .page-header {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1503676260728-1c00da094a0b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            height: 250px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }
        .page-header h1 { font-size: 2.5rem; margin: 0; border-bottom: 4px solid var(--primary-yellow); padding-bottom: 5px; }

        /* --- News List --- */
        .container { max-width: 1100px; margin: 50px auto; padding: 0 20px; }
        
        .search-bar { margin-bottom: 30px; display: flex; justify-content: flex-end; }
        .search-bar input { padding: 10px; border: 1px solid #ddd; border-radius: 5px; width: 250px; font-family: 'Sarabun'; }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }
        .news-card {
            background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: transform 0.3s;
            border-bottom: 4px solid transparent;
        }
        .news-card:hover { transform: translateY(-5px); border-bottom-color: var(--primary-red); }
        .card-img { width: 100%; height: 200px; object-fit: cover; background: #eee; }
        .card-body { padding: 20px; }
        .card-cat { color: var(--primary-red); font-size: 0.8rem; font-weight: bold; text-transform: uppercase; background: #ffe6e6; padding: 3px 10px; border-radius: 20px; display: inline-block; margin-bottom: 10px; }
        .card-title { font-size: 1.2rem; margin: 0 0 10px 0; color: #333; line-height: 1.4; }
        .card-desc { color: #666; font-size: 0.9rem; line-height: 1.6; }
        .read-more { display: block; margin-top: 15px; color: var(--dark-blue); font-weight: bold; text-decoration: none; }

        footer { background: var(--dark-blue); color: white; text-align: center; padding: 20px; margin-top: 50px; }
    </style>
</head>
<body>

    <div class="top-bar"><a href="login.html"><i class="fas fa-lock"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</a></div>
    <nav>
        <div class="logo-area">
            <div style="width:40px; height:40px; background:var(--primary-red); border-radius:50%; display:flex; justify-content:center; align-items:center; color:white; font-weight:bold;">RPK</div>
            <div class="logo-text"><h1>‡∏£‡∏≤‡∏ä‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ô‡∏∏‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πí‡πñ</h1><p>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏•‡∏≥‡∏û‡∏π‡∏ô</p></div>
        </div>
        <ul>
            <li><a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
            <li><a href="about.html">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a></li>
            <li><a href="academics.html">‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£</a></li>
            <li><a href="student-affairs.html">‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a></li>
            <li><a href="admission.html" class="btn-apply-nav">‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a></li>
            <li><a href="contact.html">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
        </ul>
    </nav>

    <header class="page-header">
        <h1>‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>
    </header>

    <div class="container">
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ç‡πà‡∏≤‡∏ß..." onkeyup="searchNews()">
        </div>

        <div id="news-container" class="news-grid">
            <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
        </div>
    </div>

    <footer>
        <p>¬© 2025 ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏ä‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ô‡∏∏‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πí‡πñ ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏•‡∏≥‡∏û‡∏π‡∏ô</p>
    </footer>

    <script>
        let allNews = []; // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏ß‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤

        async function fetchAllNews() {
            try {
                const response = await fetch('http://localhost:5000/api/news');
                allNews = await response.json();
                renderNews(allNews); // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('news-container').innerHTML = '<p style="color:red">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Server ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ</p>';
            }
        }

        function renderNews(newsList) {
            const container = document.getElementById('news-container');
            container.innerHTML = '';

            if (newsList.length === 0) {
                container.innerHTML = '<p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πà‡∏≤‡∏ß</p>';
                return;
            }

            newsList.forEach(news => {
                const imageUrl = news.imageUrl || 'https://via.placeholder.com/400x250?text=News';
                
                const card = document.createElement('div');
                card.className = 'news-card';
                card.innerHTML = `
                    <img src="${imageUrl}" class="card-img" alt="‡∏Ç‡πà‡∏≤‡∏ß">
                    <div class="card-body">
                        <span class="card-cat">${news.category}</span>
                        <h3 class="card-title">${news.title}</h3>
                        <p class="card-desc">${news.content.substring(0, 80)}...</p>
                        <a href="#" class="read-more">‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‚Üí</a>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πà‡∏≤‡∏ß (‡πÅ‡∏ñ‡∏°‡πÉ‡∏´‡πâ!)
        function searchNews() {
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            const filteredNews = allNews.filter(news => 
                news.title.toLowerCase().includes(searchText) || 
                news.category.toLowerCase().includes(searchText)
            );
            renderNews(filteredNews);
        }

        fetchAllNews();
    </script>
</body>
</html>